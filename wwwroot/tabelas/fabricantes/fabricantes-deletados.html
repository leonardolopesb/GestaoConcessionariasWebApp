<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <title>Fabricantes Deletados</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container py-4">
  <h1 class="mb-3">Fabricantes Deletados</h1>

  <table class="table table-bordered">
    <thead class="table-dark">
      <tr>
        <th>Id</th><th>Nome</th><th>País</th><th>Ano</th><th>Website</th><th>Ações</th>
      </tr>
    </thead>
    <tbody id="tbody"><tr><td colspan="6">Carregando…</td></tr></tbody>
  </table>

  <script>
    async function carregar() {
      const tb = document.getElementById('tbody');
      tb.innerHTML = "<tr><td colspan='6'>Carregando…</td></tr>";
      const r = await fetch('/api/fabricantes/deleted');
      const dados = await r.json();
      if (!dados.length) { tb.innerHTML = "<tr><td colspan='6'>Nenhum item</td></tr>"; return; }
      tb.innerHTML = dados.map(f => `
        <tr>
          <td>${f.id}</td>
          <td>${f.nome ?? ""}</td>
          <td>${f.paisOrigem ?? ""}</td>
          <td>${f.anoFundacao ?? ""}</td>
          <td><a href="${f.website ?? '#'}" target="_blank">${f.website ?? ""}</a></td>
          <td>
            <button class="btn btn-sm btn-success" onclick="restaurar('${f.id}')">Restaurar</button>
          </td>
        </tr>`).join('');
    }
    async function restaurar(id) {
      const r = await fetch(`/api/fabricantes/${id}/restore`, { method: 'POST' });
      if (r.ok) carregar();
      else alert('Falha ao restaurar');
    }
    carregar();
  </script>
</body>
</html>
